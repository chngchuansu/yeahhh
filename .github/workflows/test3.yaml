name: CXBX-Reloaded TRUE Debug Build

on:
  workflow_dispatch:

jobs:
  build-debug:
    runs-on: windows-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        submodules: recursive

    - name: Configure CMake (Visual Studio)
      run: |
        cmake -S . -B build `
          -G "Visual Studio 17 2022" `
          -A x64

    - name: Build Debug explicitly
      run: |
        cmake --build build --config Debug

    - name: Verify Debug symbols exist
      run: |
        dir build\**\Debug\*.pdb

    - name: Upload Debug Artifacts
      uses: actions/upload-artifact@v4
      with:
        name: cxbx-reloaded-TRUE-debug
        path: |
          build\**\Debug\*.exe
          build\**\Debug\*.pdb
